version: '3'
services:
  cellapp:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - ami_share:/data
    stop_signal: SIGINT
    ports:
      - "8000:8000"
      - "3000:3000"
    environment:
      - DATA_DIR=/data
      - USER_DATA_FOLDER=/app/backend/user_data
      - TRAINING_DATA_FOLDER=/app/backend/classification/data
      - NUMBA_CACHE_DIR=/tmp 
    command: supervisord
volumes:
  ami_share:
    driver_opts:
      type: cifs
      o: username=ami,password=***REMOVED***,vers=3.0
      device: //10.195.6.13/ami
